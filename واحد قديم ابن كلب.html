<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ÙˆØ§Ø­Ø¯ Ù‚Ø¯ÙŠÙ… Ø§Ø¨Ù† ÙƒÙ„Ø¨</title>
<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: black;
    color: white;
    font-family: Arial, sans-serif;
    overflow: hidden;
    text-align: center;
}

#text {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 26px;
    width: 90%;
    z-index: 2;
}

video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: none;
}

#timer {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 28px;
    color: red;
    display: none;
    z-index: 3;
}

#noteText {
    position: absolute;
    top: 80px;
    left: 50%;
    transform: translateX(-50%);
    display: none;
    background: rgba(0,0,0,0.5);
    padding: 10px 20px;
    border-radius: 12px;
    font-size: 22px;
    font-weight: bold;
    z-index: 3;
}

#inputBox {
    display: none;
    position: absolute;
    top: 100px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 3;
    background: rgba(0,0,0,0.4);
    padding: 15px 25px;
    border-radius: 12px;
}

input {
    padding: 10px;
    font-size: 18px;
    width: 260px;
    text-align: center;
}

button {
    margin-top: 10px;
    padding: 10px 25px;
    font-size: 18px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
}

#finalImage {
    display: none;
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 5;
}
</style>
</head>

<body>

<div id="text"></div>

<video id="video4" src="4.mp4"></video>
<video id="video5" src="5.mp4"></video>

<div id="timer"></div>
<div id="noteText"></div>

<div id="inputBox">
    <div>Ø§ÙƒØªØ¨ÙŠ Ø¨Ø­Ø¨Ùƒ Ø¹Ø´Ø± Ù…Ø±Ø§Øª Ø¹Ø´Ø§Ù† ØªØ±Ø¶ÙŠÙ†ÙŠ</div>
    <div>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <span id="count">10</span></div>
    <input type="text" id="loveInput">
    <br>
    <button id="doneBtn" onclick="finish()" style="display:none;">ØªÙ…</button>
</div>

<img id="finalImage" src="7.jpg" alt="Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø©">
<audio id="audio" src="6.mp3"></audio>

<script>
const text = document.getElementById("text");
const noteText = document.getElementById("noteText");
const video4 = document.getElementById("video4");
const video5 = document.getElementById("video5");
const timerEl = document.getElementById("timer");
const inputBox = document.getElementById("inputBox");
const loveInput = document.getElementById("loveInput");
const countEl = document.getElementById("count");
const doneBtn = document.getElementById("doneBtn");
const finalImage = document.getElementById("finalImage");
const audio = document.getElementById("audio");

let remaining = 10;
let totalTime = 600; // 10 Ø¯Ù‚Ø§Ø¦Ù‚

// Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
text.innerHTML = "ÙˆÙŠØªØŸØŸØŸ";
setTimeout(() => {
    text.innerHTML = "Ù‡Ùˆ Ø£ØµÙ„Ø§Ù‹ Ø²Ù„Ù…Ø© Ø¹Ø´Ø§Ù† ØªØ®ØªØ§Ø±ÙŠÙ‡ØŸ ðŸ¤¨";
}, 2000);

setTimeout(() => {
    text.innerHTML = "";
    playVideo4();
}, 5000);

// ÙÙŠØ¯ÙŠÙˆ 4
function playVideo4() {
    video4.style.display = "block";
    video4.play();
    video4.onended = () => {
        video4.style.display = "none";
        punishmentIntro();
    };
}

// Ù…Ù‚Ø¯Ù…Ø© Ø§Ù„Ø¹Ù‚Ø§Ø¨
function punishmentIntro() {
    text.innerHTML = "Ø±Ø§Ø­ Ø£ÙˆØ±ÙŠÙƒÙŠ Ø§Ù„Ø¹Ù‚Ø§Ø¨ Ø§Ù„ØµØ­ Ù‡Ø³Ø§";
    setTimeout(() => {
        text.innerHTML = "ÙŠÙ„Ø§ ØªÙØ±Ø¬ÙŠ Ø¹Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ 10 Ø¯Ù‚Ø§ÙŠÙ‚ ÙƒØ±Ù†Ø¬ ÙˆØªØ§ÙÙ‡";
    }, 3000);

    setTimeout(() => {
        text.innerHTML = "";
        playVideo5();
    }, 6000);
}

// ÙÙŠØ¯ÙŠÙˆ 5 + Ù…Ø¤Ù‚Øª
function playVideo5() {
    video5.style.display = "block";
    video5.play();
    timerEl.style.display = "block";
    updateTimer();

    const countdown = setInterval(() => {
        totalTime--;
        updateTimer();
        if (totalTime <= 0) finish();
    }, 1000);

    // Ø¨Ø¹Ø¯ 10 Ø«ÙˆØ§Ù†ÙŠ
    setTimeout(() => {
        noteText.innerHTML = "Ø£Ø­Ø³ ÙƒØ°Ø§ Ø­Ø±Ø§Ù…â€¦ Ø£Ù†Ø§ Ø¨Ø­Ø¨Ùƒ ";
        noteText.style.display = "block";
        setTimeout(() => {
            noteText.innerHTML = "Ø¨Ø®ÙÙ Ø§Ù„Ø¹Ù‚Ø§Ø¨ Ø´ÙˆÙŠ";
        }, 3000);

        setTimeout(() => {
            noteText.style.display = "none";
            showInput();
        }, 6000);
    }, 10000);
}

function updateTimer() {
    const m = Math.floor(totalTime / 60);
    const s = totalTime % 60;
    timerEl.innerHTML = `${m}:${s < 10 ? "0"+s : s}`;
}

// Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø­Ø¨Ùƒ
function showInput() {
    inputBox.style.display = "block";
}

loveInput.addEventListener("input", () => {
    const matches = loveInput.value.match(/Ø¨Ø­Ø¨Ùƒ/g);
    const count = matches ? matches.length : 0;
    remaining = Math.max(10 - count, 0);
    countEl.textContent = remaining;

    if (remaining === 0) {
        doneBtn.style.display = "inline-block";
    }
});

// Ø¥Ù†Ù‡Ø§Ø¡
function finish() {
    inputBox.style.display = "none";
    timerEl.style.display = "none";
    video4.pause(); video4.style.display = "none";
    video5.pause(); video5.style.display = "none";

    // Ù†ØµÙˆØµ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
    text.innerHTML = "Ø±Ø¬Ø¹Ù†Ø§ Ù„Ù„ÙØ¶Ø§Ø¡ Ø§Ù„Ø£Ø³ÙˆØ¯ ðŸŒŒ";
    setTimeout(() => {
        text.innerHTML = "Ø³Ø§Ù…Ø­ØªÙƒ ÙŠØ§ Ø­Ù„ÙˆØªÙŠ ðŸ¤";
    }, 3000);

    setTimeout(() => {
        text.innerHTML = "Ù„ÙƒÙ† â€¦";
        setTimeout(() => {
            text.innerHTML = "Ù„Ø§ ØªØ¹ÙŠØ¯ÙŠÙ‡Ø§ ÙŠØ§ Ø­Ù„ÙˆØªÙŠ ðŸ«¦";
            text.style.display = "block";

            // Ø¨Ø¹Ø¯ Ø§Ù„Ù†Øµ Ø§Ù„Ø£Ø®ÙŠØ±ØŒ Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© + ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
            setTimeout(() => {
                text.style.display = "none";
                finalImage.style.display = "block";
                audio.play();
                audio.onended = () => {
                    finalImage.style.display = "none";
                    window.location.href = "Ø³Ø¤Ø§Ù„ ÙˆØ§Ø­Ø¯.html";
                };
            }, 3000);

        }, 2000); // Ù…Ø¯Ø© Ø¸Ù‡ÙˆØ± "Ù„ÙƒÙ† Ø¨Ø¹Ø¯ÙŠÙ†â€¦" Ù‚Ø¨Ù„ Ø§Ù„Ù†Øµ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
    }, 6000);
}
</script>

</body>
</html>
