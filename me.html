<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ØªØ­Ø¯ÙŠ Ù„Ø¤ÙŠ</title>
<style>
    /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØµÙØ­Ø© */
    body {
        margin: 0; padding: 0; height: 100vh;
        background: black;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        overflow: hidden; color: white;
        text-align: center; display: flex;
        justify-content: center; align-items: center;
    }

    /* Ø·Ø¨Ù‚Ø© Ø²Ø± Ø§Ù„ØªØ´ØºÙŠÙ„ (ØªØ¸Ù‡Ø± ÙÙ‚Ø· ÙÙŠ Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠ) */
    #start-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.8); z-index: 1000;
        display: none; /* Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ */
        flex-direction: column; justify-content: center; align-items: center;
        cursor: pointer;
    }
    .start-btn {
        padding: 20px 40px; font-size: 24px; font-weight: bold;
        background: #ff4d6d; color: white; border: none;
        border-radius: 50px; cursor: pointer;
        box-shadow: 0 0 20px rgba(255, 77, 109, 0.6);
        animation: pulse 1.5s infinite;
    }
    @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

    /* Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ */
    #mainVideo { 
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
        object-fit: cover; z-index: 10; display: none; 
    }
    
    /* Ø·Ø¨Ù‚Ø© Ø§Ù„Ù†ØµÙˆØµ ÙˆØ§Ù„Ø­ÙˆØ§Ø± */
    #dialogueOverlay { 
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
        background: rgba(0,0,0,0.7); backdrop-filter: blur(5px); 
        z-index: 20; display: none; flex-direction: column; 
        justify-content: center; align-items: center; padding: 20px; 
    }
    .dialogue-text { font-size: 30px; font-weight: bold; color: #fff; text-shadow: 0 0 10px #ff69b4; opacity: 0; transition: opacity 0.5s; }

    /* Ø§Ù„ÙƒÙˆÙŠØ² */
    .glass-box { position: relative; z-index: 30; background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border-radius: 20px; padding: 20px; width: 90%; max-width: 400px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.3); display: none; }
    .timer { font-size: 40px; font-weight: bold; color: #ffeb3b; margin-bottom: 15px; }
    .question { font-size: 24px; margin-bottom: 25px; font-weight: bold; line-height: 1.4; }
    .option-btn { display: block; width: 100%; padding: 15px; margin: 10px 0; background: rgba(255,255,255,0.9); color: #333; border: none; border-radius: 12px; font-size: 18px; cursor: pointer; }
    
    /* Ø§Ù„Ù…Ù‚Ø§Ù„Ø¨ */
    .ad-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; z-index: 50; display: none; flex-direction: column; justify-content: center; align-items: center; }
    .ad-overlay video { width: 100%; height: auto; object-fit: contain; }
    .skip-btn { position: absolute; bottom: 30px; right: 20px; background: rgba(0,0,0,0.6); color: white; padding: 12px 25px; border: 1px solid white; border-radius: 5px; cursor: pointer; display: none; z-index: 60; font-size: 16px; }
    #loay-chat { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.85); padding: 15px 25px; border-radius: 25px; font-size: 18px; color: #00ffea; z-index: 100; display: none; width: 85%; text-align: center; border: 1px solid #00ffea; }
    .virus-popup { position: fixed; background: red; color: white; padding: 20px; font-weight: bold; font-size: 20px; border: 3px solid yellow; z-index: 200; animation: shake 0.5s infinite; box-shadow: 5px 5px 15px black; }
    @keyframes shake { 0% { transform: translate(1px, 1px) rotate(0deg); } 10% { transform: translate(-1px, -2px) rotate(-1deg); } }
</style>
</head>
<body>

<div id="start-overlay">
    <button class="start-btn" onclick="playForcedManually()">Ø§Ø¶ØºØ·ÙŠ Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ğŸ¬</button>
</div>

<video id="mainVideo" playsinline></video>

<div id="dialogueOverlay">
    <div class="dialogue-text" id="dialogueText"></div>
</div>

<div class="glass-box" id="quizBox">
    <div class="timer" id="timer">60</div>
    <div class="question" id="qText"></div>
    <div id="options"></div>
</div>

<div class="ad-overlay" id="adLayer">
    <h3 style="position:absolute; top:20px; left:20px; color:yellow; z-index:55;">Ø¥Ø¹Ù„Ø§Ù† Ø¥Ø¬Ø¨Ø§Ø±ÙŠ</h3>
    <video id="adVideo" src="ad1.mp4" loop playsinline muted></video>
    <div class="skip-btn" id="skipBtn" onclick="trySkip()">Skip Ad</div>
</div>

<div id="loay-chat"></div>

<script>
    const status = sessionStorage.getItem("meStatus");
    const startOverlay = document.getElementById("start-overlay");
    const mainVideo = document.getElementById("mainVideo");
    
    // Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¹Ù†Ø§ØµØ±
    const dialogueOverlay = document.getElementById("dialogueOverlay");
    const dialogueText = document.getElementById("dialogueText");
    const quizBox = document.getElementById("quizBox");
    const adLayer = document.getElementById("adLayer");
    const skipBtn = document.getElementById("skipBtn");
    const loayChat = document.getElementById("loay-chat");

    const questions = [
        { q: "ÙƒÙ… ÙŠØ³Ø§ÙˆÙŠ 5 + 5ØŸ", opts: ["10", "55", "100"], ans: 0, time: 20 },
        { q: "Ù…Ø§ Ù‡Ùˆ Ù„ÙˆÙ† Ø§Ù„Ø³Ù…Ø§Ø¡ØŸ", opts: ["Ø£Ø®Ø¶Ø±", "Ø£Ø²Ø±Ù‚", "Ø¨Ù†ÙØ³Ø¬ÙŠ"], ans: 1, time: 15 },
        { q: "Ø³Ø¤Ø§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†: 10 * 10ØŸ", opts: ["100", "200", "1000"], ans: 0, time: 15 }, 
        { q: "Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø®ÙŠØ± Ù‚Ø¨Ù„ Ø§Ù„ÙƒØ§Ø±Ø«Ø©", opts: ["ØªÙ…", "ÙŠØ¨", "Ø£ÙˆÙƒ"], ans: 1, time: 10 } 
    ];
    let qIndex = 0;
    let timerInterval;

    window.onload = function() {
        mainVideo.style.display = "block";

        if (status === 'forced') {
            // --- Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠØ©: Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø²Ø± ---
            startOverlay.style.display = "flex";
            // Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¬Ø§Ù‡Ø² ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©
            mainVideo.src = "forced.mp4";
        } else {
            // --- Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±ÙŠ: ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ ---
            startOverlay.style.display = "none";
            startLoveScenario();
        }
    };

    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·
    function playForcedManually() {
        startOverlay.style.display = "none";
        mainVideo.muted = false; // ØªØ´ØºÙŠÙ„ Ø¨Ø§Ù„ØµÙˆØª
        mainVideo.play();
        
        mainVideo.onended = () => {
            mainVideo.style.display = "none";
            showDialogueSequence([
                { text: "Ù…Ø§ ØªÙˆÙ‚Ø¹Øª Ø§Ù†Ùˆ Ø§ÙƒÙˆÙ† Ø§Ø®Ø± ÙˆØ§Ø­Ø¯ğŸ˜”", time: 3000 },
                { text: "ÙÙŠ Ø§Ø³Ø¦Ù„Ù‡ Ù„Ø§Ø²Ù… ØªØ¬Ø§ÙˆØ¨ÙŠ Ø¹Ù„ÙŠÙ‡Ø§ Ù‡ÙŠÙ‡ÙŠ", time: 3000 },
                { text: "good luck", time: 2000 }
            ]);
        };
    }

    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ (ÙƒÙ…Ø§ ÙƒØ§Ù†)
    function startLoveScenario() {
        mainVideo.src = "homer.mp4";
        
        // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ (ØµØ§Ù…Øª Ø«Ù… ÙØªØ­)
        mainVideo.muted = true;
        var p = mainVideo.play();
        
        if(p !== undefined){
            p.then(_=>{
                // Ø§Ø´ØªØºÙ„ ØµØ§Ù…ØªØŒ Ù†Ø­Ø§ÙˆÙ„ Ù†ÙÙƒ Ø§Ù„Ù…ÙŠÙˆØª Ø¨Ø¹Ø¯ 1 Ø«Ø§Ù†ÙŠØ©
                setTimeout(()=>{ mainVideo.muted = false; }, 1000);
            }).catch(e=>{
                console.log("Autoplay blocked");
            });
        }

        mainVideo.onended = () => {
            // Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø«Ø§Ù†ÙŠ ÙŠØ´ØªØºÙ„ Ø¨Ø§Ù„ØµÙˆØª Ø¹Ø§Ø¯ÙŠ Ù„Ø£Ù† Ø§Ù„ØµÙØ­Ø© ØªÙØ§Ø¹Ù„Øª
            mainVideo.src = "kiss.mp4";
            mainVideo.muted = false;
            mainVideo.play();
            
            mainVideo.onended = () => {
                mainVideo.style.display = "none";
                showDialogueSequence([
                    { text: "Ù†ÙˆØ±ØªÙŠ ÙŠ Ø¹ÙŠÙˆÙ†ÙŠ ÙƒÙ…Ø§Ù† Ù…Ø±Ù‡", time: 3000 },
                    { text: "Ø´ÙˆÙÙŠ Ø¨ÙŠÙƒÙˆÙ† ÙÙŠ Ø§Ø³Ø¦Ù„Ù‡ Ù„Ø§Ø²Ù… ØªØ¬Ø§ÙˆØ¨ÙŠ Ø¹Ù„ÙŠÙ‡Ø§ ÙˆØ§Ø­Ø¨Ùƒ", time: 3000 },
                    { text: "ÙˆØµØ­ Ø§Ù†ØªØ¨Ù‡ÙŠ ØªØ¬Ø§ÙˆØ¨ÙŠ ØºÙ„Ø·", time: 5000 }, 
                    { text: "good luck", time: 2000 }
                ]);
            };
        };
    }

    // --- (Ù†ÙØ³ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±) ---
    function showDialogueSequence(messages) {
        dialogueOverlay.style.display = "flex";
        let i = 0;
        function showNext() {
            if (i < messages.length) {
                dialogueText.style.opacity = 0;
                dialogueText.innerText = messages[i].text;
                setTimeout(() => { dialogueText.style.opacity = 1; }, 100);
                setTimeout(() => { i++; showNext(); }, messages[i].time);
            } else {
                dialogueOverlay.style.display = "none";
                startQuiz();
            }
        }
        showNext();
    }

    function startQuiz() {
        document.body.style.background = "linear-gradient(135deg, #1e3c72, #2a5298, #ff7a8a)";
        quizBox.style.display = "block";
        loadQuestion();
    }

    function loadQuestion() {
        if (qIndex === 2) { triggerAdPrank1(); return; }
        if (qIndex === 3) { triggerVirusPrank(); return; }
        if (qIndex >= questions.length) return; 

        const q = questions[qIndex];
        document.getElementById("qText").innerText = q.q;
        const optsDiv = document.getElementById("options");
        optsDiv.innerHTML = "";
        
        let timeLeft = q.time;
        document.getElementById("timer").innerText = timeLeft;
        
        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            timeLeft--;
            document.getElementById("timer").innerText = timeLeft;
            if(timeLeft <= 0) { clearInterval(timerInterval); playPunishment(); }
        }, 1000);

        q.opts.forEach((opt, idx) => {
            const btn = document.createElement("button");
            btn.className = "option-btn";
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(idx, q.ans);
            optsDiv.appendChild(btn);
        });
    }

    function checkAnswer(selected, correct) {
        clearInterval(timerInterval);
        if (selected === correct) { qIndex++; loadQuestion(); }
        else { playPunishment(); }
    }

    function playPunishment() {
        quizBox.style.display = "none";
        mainVideo.src = "wrong.mp4";
        mainVideo.style.display = "block";
        mainVideo.muted = false; 
        document.body.style.background = "black";
        mainVideo.play();
        mainVideo.onended = () => {
            mainVideo.style.display = "none";
            document.body.style.background = "linear-gradient(135deg, #1e3c72, #2a5298, #ff7a8a)";
            quizBox.style.display = "block";
            loadQuestion(); 
        };
    }

    function triggerAdPrank1() {
        quizBox.style.display = "none";
        adLayer.style.display = "flex";
        document.getElementById("adVideo").muted = false;
        document.getElementById("adVideo").play();
        
        let count = 5;
        skipBtn.style.display = "block";
        skipBtn.innerText = "Skip in " + count;
        
        const countdown = setInterval(() => {
            count--;
            skipBtn.innerText = "Skip in " + count;
            if(count <= 0) {
                clearInterval(countdown);
                skipBtn.innerText = "Skip Ad >>";
                skipBtn.style.background = "yellow"; skipBtn.style.color = "black";
            }
        }, 1000);
    }

    let skipClicks = 0;
    function trySkip() {
        const btn = document.getElementById("skipBtn");
        if(btn.innerText.includes("in")) return;
        
        skipClicks++;
        if(skipClicks === 1) showChat("Ù‡Ø§.. Ø§Ø´ØªØºÙ„ØŸ");
        else if(skipClicks === 3) showChat("ÙˆÙŠØª Ø´ÙƒÙ„Ù‡ Ù…Ø¹Ù„Ù‚.. Ø¬Ø±Ø¨ÙŠ ØªØ§Ù†ÙŠ");
        else if(skipClicks === 6) {
            showChat("uhhhh Ø§Ù„Ø²Ø± Ø®Ø±Ø¨Ø§Ù†! Ø¯Ù‚ÙŠÙ‚Ø© Ø£ØµÙ„Ø­Ù‡ Ù„Ø¹ÙŠÙˆÙ†Ùƒ ğŸ”§");
            setTimeout(() => {
                showChat("ØªÙ… Ø§Ù„ØªØµÙ„ÙŠØ­! Ø§Ø¶ØºØ·ÙŠ Ø§Ù„Ø­ÙŠÙ† ğŸ˜‰");
                btn.onclick = function() {
                    adLayer.style.display = "none"; quizBox.style.display = "block";
                    showChat(""); qIndex++; loadQuestion();
                }
            }, 3000);
        }
    }

    function triggerVirusPrank() {
        quizBox.style.display = "none";
        adLayer.style.display = "flex";
        document.getElementById("adVideo").play();
        skipBtn.style.display = "none";
        
        setTimeout(() => {
            showChat("Ø£ÙˆÙ.. Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¨Ø§Ù„Ù‡Ø¨Ù„");
            setInterval(() => createPopup(), 200);
            setTimeout(() => showChat("Ø¨Ø±Ø¶Ùˆ Ù„Ø³Ù‡ ÙÙŠ Ù‡Ù„ Ù…Ø´ÙƒÙ„Ù‡ Ø´ÙƒÙ„Ù‡ ÙØ§ÙŠØ±ÙˆØ³ Ø¨Ø±ÙˆØ­ Ø§Ù‚ØªÙ„Ù‡ âš”ï¸"), 2000);
            setTimeout(() => {
                showChat("Ø®Ù„ÙŠÙ†ÙŠ Ø£Ø­Ø§ÙˆÙ„ Ù‡ÙŠÙƒ... ÙˆÙ‚ÙØª ÙƒÙ„ Ø´ÙŠ!");
                mainVideo.pause(); document.getElementById("adVideo").pause();
            }, 4500);
            setTimeout(() => { window.location.href = "blank.html"; }, 7000);
        }, 1000);
    }

    function createPopup() {
        const div = document.createElement("div");
        div.className = "virus-popup";
        div.innerText = "ERROR - VIRUS!!";
        div.style.top = Math.random() * 80 + "%";
        div.style.left = Math.random() * 80 + "%";
        document.body.appendChild(div);
    }

    function showChat(text) {
        if(text === "") { loayChat.style.display = "none"; return; }
        loayChat.style.display = "block";
        loayChat.innerText = "Ù„Ø¤ÙŠ: " + text;
    }
</script>
</body>
</html><!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ØªØ­Ø¯ÙŠ Ù„Ø¤ÙŠ</title>
<style>
    /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØµÙØ­Ø© */
    body {
        margin: 0; padding: 0; height: 100vh;
        background: black;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        overflow: hidden; color: white;
        text-align: center; display: flex;
        justify-content: center; align-items: center;
    }

    /* Ø·Ø¨Ù‚Ø© Ø²Ø± Ø§Ù„ØªØ´ØºÙŠÙ„ (ØªØ¸Ù‡Ø± ÙÙ‚Ø· ÙÙŠ Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠ) */
    #start-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.8); z-index: 1000;
        display: none; /* Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ */
        flex-direction: column; justify-content: center; align-items: center;
        cursor: pointer;
    }
    .start-btn {
        padding: 20px 40px; font-size: 24px; font-weight: bold;
        background: #ff4d6d; color: white; border: none;
        border-radius: 50px; cursor: pointer;
        box-shadow: 0 0 20px rgba(255, 77, 109, 0.6);
        animation: pulse 1.5s infinite;
    }
    @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

    /* Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ */
    #mainVideo { 
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
        object-fit: cover; z-index: 10; display: none; 
    }
    
    /* Ø·Ø¨Ù‚Ø© Ø§Ù„Ù†ØµÙˆØµ ÙˆØ§Ù„Ø­ÙˆØ§Ø± */
    #dialogueOverlay { 
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
        background: rgba(0,0,0,0.7); backdrop-filter: blur(5px); 
        z-index: 20; display: none; flex-direction: column; 
        justify-content: center; align-items: center; padding: 20px; 
    }
    .dialogue-text { font-size: 30px; font-weight: bold; color: #fff; text-shadow: 0 0 10px #ff69b4; opacity: 0; transition: opacity 0.5s; }

    /* Ø§Ù„ÙƒÙˆÙŠØ² */
    .glass-box { position: relative; z-index: 30; background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border-radius: 20px; padding: 20px; width: 90%; max-width: 400px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.3); display: none; }
    .timer { font-size: 40px; font-weight: bold; color: #ffeb3b; margin-bottom: 15px; }
    .question { font-size: 24px; margin-bottom: 25px; font-weight: bold; line-height: 1.4; }
    .option-btn { display: block; width: 100%; padding: 15px; margin: 10px 0; background: rgba(255,255,255,0.9); color: #333; border: none; border-radius: 12px; font-size: 18px; cursor: pointer; }
    
    /* Ø§Ù„Ù…Ù‚Ø§Ù„Ø¨ */
    .ad-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; z-index: 50; display: none; flex-direction: column; justify-content: center; align-items: center; }
    .ad-overlay video { width: 100%; height: auto; object-fit: contain; }
    .skip-btn { position: absolute; bottom: 30px; right: 20px; background: rgba(0,0,0,0.6); color: white; padding: 12px 25px; border: 1px solid white; border-radius: 5px; cursor: pointer; display: none; z-index: 60; font-size: 16px; }
    #loay-chat { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.85); padding: 15px 25px; border-radius: 25px; font-size: 18px; color: #00ffea; z-index: 100; display: none; width: 85%; text-align: center; border: 1px solid #00ffea; }
    .virus-popup { position: fixed; background: red; color: white; padding: 20px; font-weight: bold; font-size: 20px; border: 3px solid yellow; z-index: 200; animation: shake 0.5s infinite; box-shadow: 5px 5px 15px black; }
    @keyframes shake { 0% { transform: translate(1px, 1px) rotate(0deg); } 10% { transform: translate(-1px, -2px) rotate(-1deg); } }
</style>
</head>
<body>

<div id="start-overlay">
    <button class="start-btn" onclick="playForcedManually()">Ø§Ø¶ØºØ·ÙŠ Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ğŸ¬</button>
</div>

<video id="mainVideo" playsinline></video>

<div id="dialogueOverlay">
    <div class="dialogue-text" id="dialogueText"></div>
</div>

<div class="glass-box" id="quizBox">
    <div class="timer" id="timer">60</div>
    <div class="question" id="qText"></div>
    <div id="options"></div>
</div>

<div class="ad-overlay" id="adLayer">
    <h3 style="position:absolute; top:20px; left:20px; color:yellow; z-index:55;">Ø¥Ø¹Ù„Ø§Ù† Ø¥Ø¬Ø¨Ø§Ø±ÙŠ</h3>
    <video id="adVideo" src="ad1.mp4" loop playsinline muted></video>
    <div class="skip-btn" id="skipBtn" onclick="trySkip()">Skip Ad</div>
</div>

<div id="loay-chat"></div>

<script>
    const status = sessionStorage.getItem("meStatus");
    const startOverlay = document.getElementById("start-overlay");
    const mainVideo = document.getElementById("mainVideo");
    
    // Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¹Ù†Ø§ØµØ±
    const dialogueOverlay = document.getElementById("dialogueOverlay");
    const dialogueText = document.getElementById("dialogueText");
    const quizBox = document.getElementById("quizBox");
    const adLayer = document.getElementById("adLayer");
    const skipBtn = document.getElementById("skipBtn");
    const loayChat = document.getElementById("loay-chat");

    const questions = [
        { q: "ÙƒÙ… ÙŠØ³Ø§ÙˆÙŠ 5 + 5ØŸ", opts: ["10", "55", "100"], ans: 0, time: 20 },
        { q: "Ù…Ø§ Ù‡Ùˆ Ù„ÙˆÙ† Ø§Ù„Ø³Ù…Ø§Ø¡ØŸ", opts: ["Ø£Ø®Ø¶Ø±", "Ø£Ø²Ø±Ù‚", "Ø¨Ù†ÙØ³Ø¬ÙŠ"], ans: 1, time: 15 },
        { q: "Ø³Ø¤Ø§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†: 10 * 10ØŸ", opts: ["100", "200", "1000"], ans: 0, time: 15 }, 
        { q: "Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£Ø®ÙŠØ± Ù‚Ø¨Ù„ Ø§Ù„ÙƒØ§Ø±Ø«Ø©", opts: ["ØªÙ…", "ÙŠØ¨", "Ø£ÙˆÙƒ"], ans: 1, time: 10 } 
    ];
    let qIndex = 0;
    let timerInterval;

    window.onload = function() {
        mainVideo.style.display = "block";

        if (status === 'forced') {
            // --- Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠØ©: Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø²Ø± ---
            startOverlay.style.display = "flex";
            // Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¬Ø§Ù‡Ø² ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©
            mainVideo.src = "forced.mp4";
        } else {
            // --- Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±ÙŠ: ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ ---
            startOverlay.style.display = "none";
            startLoveScenario();
        }
    };

    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·
    function playForcedManually() {
        startOverlay.style.display = "none";
        mainVideo.muted = false; // ØªØ´ØºÙŠÙ„ Ø¨Ø§Ù„ØµÙˆØª
        mainVideo.play();
        
        mainVideo.onended = () => {
            mainVideo.style.display = "none";
            showDialogueSequence([
                { text: "Ù…Ø§ ØªÙˆÙ‚Ø¹Øª Ø§Ù†Ùˆ Ø§ÙƒÙˆÙ† Ø§Ø®Ø± ÙˆØ§Ø­Ø¯ğŸ˜”", time: 3000 },
                { text: "ÙÙŠ Ø§Ø³Ø¦Ù„Ù‡ Ù„Ø§Ø²Ù… ØªØ¬Ø§ÙˆØ¨ÙŠ Ø¹Ù„ÙŠÙ‡Ø§ Ù‡ÙŠÙ‡ÙŠ", time: 3000 },
                { text: "good luck", time: 2000 }
            ]);
        };
    }

    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ (ÙƒÙ…Ø§ ÙƒØ§Ù†)
    function startLoveScenario() {
        mainVideo.src = "homer.mp4";
        
        // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ (ØµØ§Ù…Øª Ø«Ù… ÙØªØ­)
        mainVideo.muted = true;
        var p = mainVideo.play();
        
        if(p !== undefined){
            p.then(_=>{
                // Ø§Ø´ØªØºÙ„ ØµØ§Ù…ØªØŒ Ù†Ø­Ø§ÙˆÙ„ Ù†ÙÙƒ Ø§Ù„Ù…ÙŠÙˆØª Ø¨Ø¹Ø¯ 1 Ø«Ø§Ù†ÙŠØ©
                setTimeout(()=>{ mainVideo.muted = false; }, 1000);
            }).catch(e=>{
                console.log("Autoplay blocked");
            });
        }

        mainVideo.onended = () => {
            // Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø«Ø§Ù†ÙŠ ÙŠØ´ØªØºÙ„ Ø¨Ø§Ù„ØµÙˆØª Ø¹Ø§Ø¯ÙŠ Ù„Ø£Ù† Ø§Ù„ØµÙØ­Ø© ØªÙØ§Ø¹Ù„Øª
            mainVideo.src = "kiss.mp4";
            mainVideo.muted = false;
            mainVideo.play();
            
            mainVideo.onended = () => {
                mainVideo.style.display = "none";
                showDialogueSequence([
                    { text: "Ù†ÙˆØ±ØªÙŠ ÙŠ Ø¹ÙŠÙˆÙ†ÙŠ ÙƒÙ…Ø§Ù† Ù…Ø±Ù‡", time: 3000 },
                    { text: "Ø´ÙˆÙÙŠ Ø¨ÙŠÙƒÙˆÙ† ÙÙŠ Ø§Ø³Ø¦Ù„Ù‡ Ù„Ø§Ø²Ù… ØªØ¬Ø§ÙˆØ¨ÙŠ Ø¹Ù„ÙŠÙ‡Ø§ ÙˆØ§Ø­Ø¨Ùƒ", time: 3000 },
                    { text: "ÙˆØµØ­ Ø§Ù†ØªØ¨Ù‡ÙŠ ØªØ¬Ø§ÙˆØ¨ÙŠ ØºÙ„Ø·", time: 5000 }, 
                    { text: "good luck", time: 2000 }
                ]);
            };
        };
    }

    // --- (Ù†ÙØ³ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±) ---
    function showDialogueSequence(messages) {
        dialogueOverlay.style.display = "flex";
        let i = 0;
        function showNext() {
            if (i < messages.length) {
                dialogueText.style.opacity = 0;
                dialogueText.innerText = messages[i].text;
                setTimeout(() => { dialogueText.style.opacity = 1; }, 100);
                setTimeout(() => { i++; showNext(); }, messages[i].time);
            } else {
                dialogueOverlay.style.display = "none";
                startQuiz();
            }
        }
        showNext();
    }

    function startQuiz() {
        document.body.style.background = "linear-gradient(135deg, #1e3c72, #2a5298, #ff7a8a)";
        quizBox.style.display = "block";
        loadQuestion();
    }

    function loadQuestion() {
        if (qIndex === 2) { triggerAdPrank1(); return; }
        if (qIndex === 3) { triggerVirusPrank(); return; }
        if (qIndex >= questions.length) return; 

        const q = questions[qIndex];
        document.getElementById("qText").innerText = q.q;
        const optsDiv = document.getElementById("options");
        optsDiv.innerHTML = "";
        
        let timeLeft = q.time;
        document.getElementById("timer").innerText = timeLeft;
        
        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            timeLeft--;
            document.getElementById("timer").innerText = timeLeft;
            if(timeLeft <= 0) { clearInterval(timerInterval); playPunishment(); }
        }, 1000);

        q.opts.forEach((opt, idx) => {
            const btn = document.createElement("button");
            btn.className = "option-btn";
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(idx, q.ans);
            optsDiv.appendChild(btn);
        });
    }

    function checkAnswer(selected, correct) {
        clearInterval(timerInterval);
        if (selected === correct) { qIndex++; loadQuestion(); }
        else { playPunishment(); }
    }

    function playPunishment() {
        quizBox.style.display = "none";
        mainVideo.src = "wrong.mp4";
        mainVideo.style.display = "block";
        mainVideo.muted = false; 
        document.body.style.background = "black";
        mainVideo.play();
        mainVideo.onended = () => {
            mainVideo.style.display = "none";
            document.body.style.background = "linear-gradient(135deg, #1e3c72, #2a5298, #ff7a8a)";
            quizBox.style.display = "block";
            loadQuestion(); 
        };
    }

    function triggerAdPrank1() {
        quizBox.style.display = "none";
        adLayer.style.display = "flex";
        document.getElementById("adVideo").muted = false;
        document.getElementById("adVideo").play();
        
        let count = 5;
        skipBtn.style.display = "block";
        skipBtn.innerText = "Skip in " + count;
        
        const countdown = setInterval(() => {
            count--;
            skipBtn.innerText = "Skip in " + count;
            if(count <= 0) {
                clearInterval(countdown);
                skipBtn.innerText = "Skip Ad >>";
                skipBtn.style.background = "yellow"; skipBtn.style.color = "black";
            }
        }, 1000);
    }

    let skipClicks = 0;
    function trySkip() {
        const btn = document.getElementById("skipBtn");
        if(btn.innerText.includes("in")) return;
        
        skipClicks++;
        if(skipClicks === 1) showChat("Ù‡Ø§.. Ø§Ø´ØªØºÙ„ØŸ");
        else if(skipClicks === 3) showChat("ÙˆÙŠØª Ø´ÙƒÙ„Ù‡ Ù…Ø¹Ù„Ù‚.. Ø¬Ø±Ø¨ÙŠ ØªØ§Ù†ÙŠ");
        else if(skipClicks === 6) {
            showChat("uhhhh Ø§Ù„Ø²Ø± Ø®Ø±Ø¨Ø§Ù†! Ø¯Ù‚ÙŠÙ‚Ø© Ø£ØµÙ„Ø­Ù‡ Ù„Ø¹ÙŠÙˆÙ†Ùƒ ğŸ”§");
            setTimeout(() => {
                showChat("ØªÙ… Ø§Ù„ØªØµÙ„ÙŠØ­! Ø§Ø¶ØºØ·ÙŠ Ø§Ù„Ø­ÙŠÙ† ğŸ˜‰");
                btn.onclick = function() {
                    adLayer.style.display = "none"; quizBox.style.display = "block";
                    showChat(""); qIndex++; loadQuestion();
                }
            }, 3000);
        }
    }

    function triggerVirusPrank() {
        quizBox.style.display = "none";
        adLayer.style.display = "flex";
        document.getElementById("adVideo").play();
        skipBtn.style.display = "none";
        
        setTimeout(() => {
            showChat("Ø£ÙˆÙ.. Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¨Ø§Ù„Ù‡Ø¨Ù„");
            setInterval(() => createPopup(), 200);
            setTimeout(() => showChat("Ø¨Ø±Ø¶Ùˆ Ù„Ø³Ù‡ ÙÙŠ Ù‡Ù„ Ù…Ø´ÙƒÙ„Ù‡ Ø´ÙƒÙ„Ù‡ ÙØ§ÙŠØ±ÙˆØ³ Ø¨Ø±ÙˆØ­ Ø§Ù‚ØªÙ„Ù‡ âš”ï¸"), 2000);
            setTimeout(() => {
                showChat("Ø®Ù„ÙŠÙ†ÙŠ Ø£Ø­Ø§ÙˆÙ„ Ù‡ÙŠÙƒ... ÙˆÙ‚ÙØª ÙƒÙ„ Ø´ÙŠ!");
                mainVideo.pause(); document.getElementById("adVideo").pause();
            }, 4500);
            setTimeout(() => { window.location.href = "blank.html"; }, 7000);
        }, 1000);
    }

    function createPopup() {
        const div = document.createElement("div");
        div.className = "virus-popup";
        div.innerText = "ERROR - VIRUS!!";
        div.style.top = Math.random() * 80 + "%";
        div.style.left = Math.random() * 80 + "%";
        document.body.appendChild(div);
    }

    function showChat(text) {
        if(text === "") { loayChat.style.display = "none"; return; }
        loayChat.style.display = "block";
        loayChat.innerText = "Ù„Ø¤ÙŠ: " + text;
    }
</script>
</body>
</html>